/*
 * compTable - a jQuery plugin to dynamically compare information in tables
 * @copyright Nikolas Grottendieck, Jan Musmann 2013
 * @license https://github.com/Okeanos/compTable/blob/master/LICENSE
 */
(function($){var settings;$.fn.compTable=function(options){var defaults={structure:"",content:"",columns:3,defaultValues:[],header:"first",footer:"last",tableAttr:{}};settings=$.extend({},defaults,options);this.append(renderCompTables())};function renderCompTables(){var tempWrapper=$();$(settings.structure).each(function(tIndex,tValue){var table=$("<table><caption></caption><tbody></tbody></table>"),tbody=$("tbody",table);table.attr("id",tValue.id);assignAttributes(settings.tableAttr,table);assignAttributes(tValue.attr,table);$("caption",table).html(tValue.title);if(0===tIndex&&"first"===settings.header){var thead=$("<thead></thead>"),tr=$("<tr></tr>");tr.append($("<td></td>"));for(var i=0;i<settings.columns;i++){tr.append($("<th></th>"))}table.find("caption").after(thead.append(tr))}if(settings.structure.length-1===tIndex&&"last"===settings.footer){var tfoot=$("<tfoot></tfoot>"),tr=$("<tr></tr>");tr.append($("<td></td>"));for(var i=0;i<settings.columns;i++){tr.append($("<th></th>"))}table.find("tbody").after(tfoot.append(tr))}$(this.rows).each(function(rIndex,rValue){var tr=$("<tr></tr>"),th=$("<th></th>").html(rValue.name);assignAttributes(rValue.trAttr,tr);assignAttributes(rValue.thAttr,th);tr.append(th);for(var i=0;i<settings.columns;i++){tr.append($("<td></td>"))}tbody.append(tr)});tempWrapper=tempWrapper.add(table)});return tempWrapper}$.fn.compTable.clearColumn=function(colIndex){$(settings.structure).each(function(tIndex,tValue){$("#"+tValue.id+" > thead > tr, "+"#"+tValue.id+" > tfoot > tr").find("th:eq("+colIndex+")").html("");$("#"+tValue.id+" > tbody > tr").each(function(){$(this).find("td:eq("+colIndex+")").html("")})})};$.fn.compTable.insertColumnData=function(colIndex,dataId,clearOnEmpty){clearOnEmpty=typeof clearOnEmpty!=="undefined"?clearOnEmpty:false;if(typeof settings.content[dataId]!=="undefined"){$(settings.structure).each(function(tIndex,tValue){$("#"+tValue.id+" > thead > tr, "+"#"+tValue.id+" > tfoot > tr").find("th:eq("+colIndex+")").html(dataId);$("#"+tValue.id+" > tbody > tr").each(function(dIndex){$(this).find("td:eq("+colIndex+")").html(settings.content[dataId][tIndex][dIndex])})})}else if(clearOnEmpty){$().compTable.clearColumn(colIndex)}};function assignAttributes(source,target){if(typeof source!=="undefined"){for(var attrIndex in source){target.attr(attrIndex,source[attrIndex])}}}})(jQuery);